<!-- Brock Schoenthaler
        Start date: January 29, 2025
        Registration Page
        html, accessibility, and bootstrap practice -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <!-- Inclusion of bootswatch stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/flatly/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-secondary">
<!-- Creates "mother card" for the two tabs -->
    <div class="d-flex card bg-transparent align-items-center justify-content-center border border-0">
        <!-- User Login Form -->
        <form class="card col-12 col-md-6 col-lg-5 bg-transparent border border-0" id="frmLogin">
            <div class="card-body">
                <!-- Company Name -->
                <h2 class="text-center mb-1 text-black mt-2">SwollenHippo Electronic Medical Records</h2>
                <!-- div that includes the picture used as the logo -->
                <div class="d-flex justify-content-center">
                    <img src="images/medical-records-svgrepo-com.svg" alt="SwollenHippo Electronic Medical Records logo" style="max-width: 30%;">
                </div>
                <h4 class="text-center mb-2 text-black mt-2 mb-2">User Login</h4>
                <!-- username/email and password input -->
                <input class="form-control mb-2" id="txtLogUser" type="email" aria-label="email" placeholder="Example@example.com">
                <div class="input-group mb-3">
                    <input class="form-control mb-2" id="txtLogPass" type="password" aria-label="password" placeholder="Password">
                    <!-- Places a button on the end of the password space that reveals the password using "myFunction" -->
                    <button class="btn btn-primary form-control col-2" type="button" onclick="myFunction()" id="btnLogPassV">View</button>
                </div>
                <!-- Login button -->
                <button class="btn btn-primary col-12 mt-3" type="button" id="btnLogin">Login</button>
                <div class="d-flex justify-content-center ">
                    <!-- button that redirects user to registration page -->
                    <button class="btn btn-link btn-lg col-12 col-md-8 col-lg-6 mt-1 pt-0 pb-0 text-info font-weight-bold" type="button" id="btnSwapLogin">Need an account? Register here!</button>
                </div>
            </div>
        </form>
        <!-- User Registration Form -->
        <form class="card col-12 col-md-6 col-lg-5 bg-transparent border border-0" id="frmRegister" style="display:none">
            <!-- Company name -->
            <h2 class="text-center mb-1 text-black mt-2">SwollenHippo Electronic Medical Records</h2>
            <div class="d-flex justify-content-center">
                <!-- Image used as company logo -->
                <img src="images/medical-records-svgrepo-com.svg" alt="SwollenHippo Electronic Medical Records logo" style="max-width: 30%;">
            </div>
            <h4 class="text-center mb-2 text-black mt-2 mb-2">User Registration</h4>
            <div class="d-flex justify-content-center align-items-center">
                <div class="card-body col-12 pt-0">
                    <!-- Div that contains username and password input -->
                     <!-- Password2 is used later in the input verification -->
                    <div class="card-body pb-2 pt-0">
                        <input class="form-control mb-2" id="txtUsername" type="email" aria-label="email" placeholder="Example@example.com">
                        <div class="input-group">
                            <input class="form-control mb-2" id="txtPassword" type =password aria-label="password" placeholder="Password">
                            <!-- Button on the end of the password input box that reveals both password and password2 -->
                            <button class="btn btn-primary form-control col-2" type="button" onclick="myFunction2()" id="btnLogPassV3">View</button>
                        </div>
                        <input class="form-control" id="txtPassword2" type =password aria-label="confirm password" placeholder="Confirm Password">
                    </div>
                    <!-- Div that contains name information, as well as address information -->
                    <div class="card-body pt-2 pb-2">
                        <!-- Div contains only name information -->
                        <div class="form-row d-flex align-items-center justify-content-between col-12" style="
                        padding-right: 0px;
                        padding-left: 0px;
                        margin-right: 0px;
                        margin-left: 0px;
                        ">
                            <input class="form-control col-4 mb-2" id="txtFname" aria-label="first name" placeholder="First Name">
                            <input class="form-control col-3 mb-2" id="txtMname" aria-label="middle name" placeholder="Middle">
                            <input class="form-control col-4 mb-2" id="txtLname" aria-label="last name" placeholder="Last Name">
                        </div>
                        <input class="form-control mb-2" id="txtStreet1" aria-label="street address 1" placeholder="Street Address 1">
                        <input class="form-control mb-2" id="txtStreet2" aria-label="street address 2" placeholder="Street Address 2">
                        <input class="form-control mb-2" id="txtCity" aria-label="city" placeholder="City">
                        <!-- Allows users to select their state from a drop down menu -->
                        <div class="form-row d-flex align-items-center justify-content-between col-12" style="
                        padding-right: 0px;
                        padding-left: 0px;
                        margin-right: 0px;
                        margin-left: 0px;
                        ">
                            <!-- Creates a select menu containing all of the states. Was unsure of a more efficient way to do this -->
                         <!-- MY own research brought little help, so I hard coded it all. -->
                            <select id="cboLocation" class="form-control col-4" placeholder="Choose Your Location" aria-label="State">
                                <option value="">Choose Your Location</option>
                                <option value="al">Alabama</option>
                                <option value="ak">Alaska</option>
                                <option value="az">Arizona</option>
                                <option value="ar">Arkansas</option>
                                <option value="ca">California</option>
                                <option value="co">Colorado</option>
                                <option value="ct">Connecticut</option>
                                <option value="de">Delaware</option>
                                <option value="fl">Florida</option>
                                <option value="ga">Georgia</option>
                                <option value="hi">Hawaii</option>
                                <option value="id">Idaho</option>
                                <option value="il">Illinois</option>
                                <option value="in">Indiana</option>
                                <option value="ia">Iowa</option>
                                <option value="ks">Kansas</option>
                                <option value="ky">Kentucky</option>
                                <option value="la">Louisiana</option>
                                <option value="me">Maine</option>
                                <option value="md">Maryland</option>
                                <option value="ma">Massachusetts</option>
                                <option value="mi">Michigan</option>
                                <option value="mn">Minnesota</option>
                                <option value="ms">Mississippi</option>
                                <option value="mo">Missouri</option>
                                <option value="mt">Montana</option>
                                <option value="ne">Nebraska</option>
                                <option value="nv">Nevada</option>
                                <option value="nh">New Hampshire</option>
                                <option value="nj">New Jersey</option>
                                <option value="nm">New Mexico</option>
                                <option value="ny">New York</option>
                                <option value="nc">North Carolina</option>
                                <option value="nd">North Dakota</option>
                                <option value="oh">Ohio</option>
                                <option value="ok">Oklahoma</option>
                                <option value="or">Oregon</option>
                                <option value="pa">Pennsylvania</option>
                                <option value="ri">Rhode Island</option>
                                <option value="sc">South Carolina</option>
                                <option value="sd">South Dakota</option>
                                <option value="tn">Tennessee</option>
                                <option value="tx">Texas</option>
                                <option value="ut">Utah</option>
                                <option value="vt">Vermont</option>
                                <option value="va">Virginia</option>
                                <option value="wa">Washington</option>
                                <option value="wv">West Virginia</option>
                                <option value="wi">Wisconsin</option>
                                <option value="wy">Wyoming</option>
                            </select>
                        
                            <input class="form-control col-3" id="txtZIP" aria-label="zip code" placeholder="ZIP Code">
                            <input class="form-control col-4" id="txtPhone" aria-label="phone number" placeholder="Phone Number">
                        </div>
                    </div>
                    <!-- Registration button -->
                    <button class="btn btn-primary col-12 mt-1 pt-0" type="button" id="btnRegister">Register</button>
                </div>
            </div>
        </form>
    </div>
    <!-- inclusion of JQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Inclusion of sweet alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Gives the decorative button a function -->
    <!-- using JQuery as opposed to vanilla java script -->
    <script>
        // Function that runs on click of "Login" button
        $("#btnLogin").on('click',function(){
            // Regular expression for emails
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            // Regular expression for a phone number
            const regPhone = /(?:\d{1}\s)?\(?(\d{3})\)?-?\s?(\d{3})-?\s?(\d{4})/
            // Regular expression for US Postal Codes
            const regZIP = /^\d{5}(\-?\d{4})?$/

            // Captures necessary Login data
            let strUsername = document.querySelector('#txtLogUser').value
            const strPassword = $('#txtLogPass').val()
            let blnError = false
            let strMessage = ""

            strUsername = strUsername.toLowerCase()
            // Input validation for login
            if(!regEmail.test(strUsername)){
                blnError = true
                strMessage+='<p class ="mb-0 mt-0">Username Must be an email address</p>'
            }
            if(strPassword.length < 8){
                blnError = true
                strMessage+="<p>Password Cannot Be Blank</p>"
            }
            // Error message
            if(blnError == true){
                Swal.fire({
                    title: "Oh no, you have an error!",
                    html: strMessage,
                    icon: "error"
                })
            }
            // Success message
            else{
                Swal.fire({
                    title: "Congrats!",
                    html:  "You're logged in!",
                    icon: "success"
                })
            }
        })
        // Function that runs on click of "Register" button
        $("#btnRegister").on('click',function(){

            // Regular expression for emails
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            // Regular expression for a phone number
            const regPhone = /(?:\d{1}\s)?\(?(\d{3})\)?-?\s?(\d{3})-?\s?(\d{4})/
            // Regular expression for US Postal Codes
            const regZIP = /^\d{5}(\-?\d{4})?$/

            // Captures inputs in all data fields on the registration page
            let strUsername = document.querySelector('#txtUsername').value
            const strPassword = $('#txtPassword').val()
            const strPassword2 = $('#txtPassword2').val()
            let strFname = document.querySelector('#txtFname').value
            let strMname = document.querySelector('#txtMname').value
            let strLname = document.querySelector('#txtLname').value
            let strStreet1 = document.querySelector('#txtStreet1').value
            let strStreet2 = document.querySelector('#txtStreet2').value
            const strCity = document.querySelector('#txtCity').value
            const strState = document.querySelector('#cboLocation').value
            const strZIP = document.querySelector('#txtZIP').value
            const strPhone = document.querySelector('#txtPhone').value

            let blnError = false
            let strMessage = ""
            let intTotErrors = 0

            strUsername = strUsername.toLowerCase()
            strFname = strFname.toLowerCase()
            strMname = strMname.toLowerCase()
            strLname = strLname.toLowerCase()
            // Input validation for registration page
            if(!regEmail.test(strUsername)){
                blnError = true
                strMessage+='<p>Username must be an email</p>'
                intTotErrors += 1
            }
            if(strPassword.length < 1){
                blnError = true
                strMessage+='<p>Password cannot be blank</p>'
                intTotErrors += 1
            }
            if(strPassword2 != strPassword){
                blnError = true
                strMessage+='<p>Password fields must match</p>'
                intTotErrors += 1
            }
            if(strFname.trim().length < 2){
                blnError = true
                strMessage+='<p>First name cannot be blank</p>'
                intTotErrors += 1
            }
            if(strLname.trim().length < 2){
                blnError = true
                strMessage+='<p>Last name cannot be blank</p>'
                intTotErrors += 1
            }
            if(strStreet1.length < 1){
                blnError = true
                strMessage+='<p>Street Address cannot be blank</p>'
                intTotErrors += 1
            }
            if(strCity.length < 1){
                blnError = true
                strMessage+='<p>City cannot be blank</p>'
                intTotErrors += 1
            }
            if(strState == ''){
                blnError = true
                strMessage+='<p>State cannot be blank</p>'
                intTotErrors += 1
            }
            if(!regZIP.test(strZIP)){
                blnError = true
                strMessage+='<p>Zip Code cannot be blank</p>'
                intTotErrors += 1
            }
            if(!regPhone.test(strPhone)){
                blnError = true
                strMessage+='<p>Phone number does match required format</p>'
                intTotErrors += 1
            }

            // alert Message for if there are mroe than 5 errors
            if(intTotErrors >= 5){
                Swal.fire({
                    title: "Oh no, you have errors",
                    text: "You have errors in multiple fields.",
                    icon: "error"
                })
            }
            // Input message for if there are less than 5 errors, but at least 1
            else if(intTotErrors < 5 && intTotErrors > 0){
            Swal.fire({
                title: "Oh no, you have an error!",
                html: strMessage,
                icon: "error"
            });
            }
            // Success message
            else{
                Swal.fire({
                    title: "Congrats",
                    text: "You are registered!",
                    icon: "success"
                })
                // Automatic redirect to login page
                $('#frmRegister').slideUp(function(){
                    $('#frmLogin').slideDown('slow')
                })
                // Erases all data on reistration page and sets values to be empty strings
                document.querySelector('#txtUsername').value = ''
                document.querySelector('#txtPassword').value = ''
                document.querySelector('#txtPassword2').value = ''
                document.querySelector('#txtFname').value = ''
                document.querySelector('#txtMname').value = ''
                document.querySelector('#txtLname').value = ''
                document.querySelector('#txtStreet1').value = ''
                document.querySelector('#txtStreet2').value = ''
                document.querySelector('#txtCity').value = ''
                document.querySelector('#cboLocation').value = ''
                document.querySelector('#txtZIP').value = ''
                document.querySelector('#txtPhone').value = ''
            }
        })
        // Reveals/hides password on the login page
        function myFunction() {
            var x = document.getElementById("txtLogPass");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
        // Reveals/hides both password fields on the registration page
        function myFunction2() {
            var x = document.getElementById("txtPassword");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
            var y = document.getElementById("txtPassword2");
            if (y.type === "password") {
                y.type = "text";
            } else {
                y.type = "password";
            }
        }
        // Allows users to access registration page from the login page
        $('#btnSwapLogin').on('click',function(){
            $('#frmLogin').slideUp(function(){
                $('#frmRegister').slideDown('slow')
            })
        })
    </script>
</body>
</html>